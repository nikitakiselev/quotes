:80 {
    # Отдача статических файлов
    root * /usr/share/caddy
    file_server

           # Проксирование API запросов к backend (Go)
           handle /api/* {
               reverse_proxy backend:8080 {
                   # Передаем заголовки клиента к backend
                   header_up X-Forwarded-For {remote_host}
                   header_up X-Real-IP {remote_host}
               }
               # Caddy автоматически передает все заголовки от backend к клиенту, включая X-Backend
           }

    # SPA routing - все остальные запросы отдаем index.html
    handle {
        try_files {path} /index.html
    }
}

